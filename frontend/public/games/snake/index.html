<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Snake ‚Äî GAYMZ</title>
<style>
:root{--bg:#07101b;--fg:#eef2ff;--card:#0b1220}
.light{--bg:#f8fafc;--fg:#0b1220;--card:#ffffff}
html,body{height:100%;margin:0;font-family:Inter, Arial;background:var(--bg);color:var(--fg);transition:background-color .25s,color .25s}
.wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
#card{width:100%;max-width:980px;background:var(--card);border-radius:12px;box-shadow:0 12px 40px rgba(2,6,23,.5);padding:18px;}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.canvas-wrap{position:relative}
canvas{display:block;width:100%;height:auto;background:linear-gradient(180deg,#07101b 0,#08131b 100%);border-radius:6px}
.btn{cursor:pointer;padding:8px 12px;border-radius:8px;border:0;margin-left:6px}
.card-centered{background:var(--card);border-radius:12px;padding:18px;width:520px;text-align:center;box-shadow:0 8px 30px rgba(0,0,0,.4)}
.overlay{position:absolute;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}
.small{font-size:13px;color:rgba(255,255,255,.8)}
</style>
</head>
<body>
<div class="wrap">
  <div id="card">
    <div class="header">
      <div style="font-weight:700">Snake ‚Äî Game 1</div>
      <div>
        <button id="themeBtn" class="btn">‚òÄÔ∏è</button>
        <button id="fullscreen" class="btn">F</button>
      </div>
    </div>

    <div class="canvas-wrap">
      <canvas id="c" width="900" height="380"></canvas>

      <div id="paused" class="overlay" style="display:none">
        <div class="card-centered">
          <h2>Paused</h2>
          <div style="margin-top:10px">
            <button id="resume" class="btn">Resume</button>
            <button id="restart" class="btn">Restart</button>
          </div>
          <div class="small" style="margin-top:8px">Hold SPACE to toggle pause ‚Ä¢ R restart ‚Ä¢ F fullscreen</div>
        </div>
      </div>

      <div id="gameover" class="overlay" style="display:none">
        <div class="card-centered">
          <h2>Game Over</h2>
          <div id="final" style="margin:10px 0"></div>
          <div>
            <button id="replay" class="btn">Replay</button>
            <button id="quit" class="btn">Quit</button>
          </div>
        </div>
      </div>
    </div>

    <div style="margin-top:12px" class="small">Use arrow keys / WASD. Fullscreen (F). Pause by holding SPACE.</div>
  </div>
</div>

<script>
/* Minimal polished snake */
const c = document.getElementById('c'), ctx = c.getContext('2d');
const themeBtn = document.getElementById('themeBtn');
const fullscreenBtn = document.getElementById('fullscreen');
let theme = localStorage.getItem('g_theme') || 'dark';
function applyTheme(){ document.documentElement.classList.toggle('light', theme==='light'); themeBtn.textContent = theme==='light' ? 'üåô' : '‚òÄÔ∏è'; localStorage.setItem('g_theme', theme); }
applyTheme();
themeBtn.onclick = ()=>{ theme = theme==='light' ? 'dark' : 'light'; applyTheme(); }

fullscreenBtn.onclick = ()=> {
  if(!document.fullscreenElement) c.requestFullscreen?.(); else document.exitFullscreen?.();
};

const CELL = 18;
let cols = Math.floor(c.width / CELL), rows = Math.floor(c.height / CELL);
let snake = [], dir={x:1,y:0}, food=null, score=0, speed=8, acc=0, last=performance.now();
let paused=false, gameOver=false;
let spaceDown=false, spaceTime=0, spaceHandled=false;
function spawnFood(){ while(true){ let f={x:Math.floor(Math.random()*(cols-2))+1, y:Math.floor(Math.random()*(rows-2))+1}; if(!snake.some(s=>s.x===f.x&&s.y===f.y)) return f; } }
function reset(){ cols = Math.floor(c.width/CELL); rows = Math.floor(c.height/CELL); snake=[{x:Math.floor(cols/2),y:Math.floor(rows/2)},{x:Math.floor(cols/2)-1,y:Math.floor(rows/2)}]; dir={x:1,y:0}; food=spawnFood(); score=0; speed=8; paused=false; gameOver=false; document.getElementById('paused').style.display='none'; document.getElementById('gameover').style.display='none'; }
reset();

window.addEventListener('keydown', e=>{
  if(e.key==='ArrowLeft'||e.key==='a'){ if(!(dir.x===1 && dir.y===0)) dir={x:-1,y:0} }
  if(e.key==='ArrowRight'||e.key==='d'){ if(!(dir.x===-1 && dir.y===0)) dir={x:1,y:0} }
  if(e.key==='ArrowUp'||e.key==='w'){ if(!(dir.y===1 && dir.x===0)) dir={x:0,y:-1} }
  if(e.key==='ArrowDown'||e.key==='s'){ if(!(dir.y===-1 && dir.x===0)) dir={x:0,y:1} }
  if(e.key==='f') fullscreenBtn.click();
  if(e.key==='r'){ reset(); }
  if(e.key===' '){
    spaceDown=true; spaceTime=performance.now()/1000; spaceHandled=false;
  }
});
window.addEventListener('keyup', e=>{ if(e.key===' '){ spaceDown=false; spaceHandled=false;} });

document.getElementById('resume').onclick = ()=>{ paused=false; document.getElementById('paused').style.display='none'; };
document.getElementById('restart').onclick = ()=>{ reset(); };
document.getElementById('replay').onclick = ()=>{ reset(); };
document.getElementById('quit').onclick = ()=>{ window.close?.(); };

function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--bg').trim() || '#07101b';
  ctx.fillRect(0,0,c.width,c.height);
  // food
  ctx.fillStyle = '#ff5a5a';
  ctx.fillRect(food.x*CELL+4, food.y*CELL+4, CELL-8, CELL-8);
  // snake
  for(let i=0;i<snake.length;i++){
    let s=snake[i];
    ctx.fillStyle = i===0 ? '#22c55e' : '#16a34a';
    roundRect(ctx, s.x*CELL+1, s.y*CELL+1, CELL-2, CELL-2, 4);
  }
  // hud
  ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--fg').trim() || '#fff';
  ctx.font = '14px Inter, Arial';
  ctx.fillText('Score: ' + score, 8, 18);
}
function roundRect(ctx,x,y,w,h,r){ ctx.beginPath(); ctx.moveTo(x+r,y); ctx.arcTo(x+w,y,x+w,y+h,r); ctx.arcTo(x+w,y+h,x,y+h,r); ctx.arcTo(x,y+h,x,y,r); ctx.arcTo(x,y,x+w,y,r); ctx.closePath(); ctx.fill(); }

function loop(){
  let now=performance.now(), dt=(now-last)/1000; last=now; acc += dt;
  // long-press pause
  if(spaceDown && !spaceHandled){
    if(performance.now()/1000 - spaceTime >= 0.1){ paused = !paused; spaceHandled=true; document.getElementById('paused').style.display = paused ? 'flex' : 'none'; }
  }
  if(!paused && !gameOver){
    let stepSec = 1/speed;
    while(acc >= stepSec){
      acc -= stepSec;
      let head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
      if(head.x<0||head.x>=cols||head.y<0||head.y>=rows){ gameOver=true; break; }
      if(snake.some(s=>s.x===head.x&&s.y===head.y)){ gameOver=true; break; }
      snake.unshift(head);
      if(head.x===food.x&&head.y===food.y){ score++; food=spawnFood(); speed = Math.min(20, speed+0.3); } else { snake.pop(); }
    }
  }
  draw();
  if(gameOver){ document.getElementById('final').textContent = "Score: "+score; document.getElementById('gameover').style.display='flex'; }
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
