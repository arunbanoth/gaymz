<!doctype html>
<html>
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Blaster Dash — GAYMZ</title>
<style>
body{margin:0;font-family:Inter;background:#07101b;color:#fff}
.container{padding:26px;display:flex;justify-content:center}
.card{width:100%;max-width:980px;padding:16px;border-radius:12px}
canvas{width:100%;height:420px;border-radius:8px;background:linear-gradient(180deg,#02102a,#021022)}
.small{font-size:13px}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <div style="display:flex;justify-content:space-between">
      <div style="font-weight:700">Blaster Dash — Game 5</div>
      <div>
        <button id="theme">☀️</button>
      </div>
    </div>
    <canvas id="c" width="920" height="420"></canvas>
    <div class="small" style="margin-top:8px">Arrow keys to move, SPACE to shoot, SHIFT to dash. Hold SPACE for pause.</div>
  </div>
</div>
<script>
const c=document.getElementById('c'), ctx=c.getContext('2d'), w=c.width, h=c.height;
let px=w/2, py=h-80, pvelx=0, speed=240, bullets=[], drones=[], score=0, lives=3;
let spaceDown=false, spaceTime=0, spaceHandled=false, paused=false, gameOver=false;
window.addEventListener('keydown', e=>{
  if(e.key==='ArrowLeft'||e.key==='a') pvelx=-1;
  if(e.key==='ArrowRight'||e.key==='d') pvelx=1;
  if(e.key===' ') { spaceDown=true; if(!spaceHandled && !paused){ shoot(); } spaceTime=performance.now()/1000; }
  if(e.key==='Shift') speed = 420;
});
window.addEventListener('keyup', e=>{
  if(['ArrowLeft','a','ArrowRight','d'].includes(e.key)) pvelx=0;
  if(e.key===' ') { spaceDown=false; spaceHandled=false; }
  if(e.key==='Shift') speed=240;
  if(e.key==='r') reset();
});
function shoot(){ bullets.push({x:px,y:py-18,vx:0,vy:-520,ttl:1.6}); }
function spawnDrone(){ drones.push({x:Math.random()*(w-60)+30,y:-20, r:12, vx:(Math.random()-0.5)*80, vy:50 + Math.random()*120}); }
let spawnAcc=0, spawnInterval=0.9, last=performance.now();
function reset(){ bullets=[]; drones=[]; score=0; lives=3; gameOver=false; paused=false; px=w/2; }
reset();
function loop(){
  let now=performance.now(), dt=(now-last)/1000; last=now;
  if(spaceDown && !spaceHandled && (performance.now()/1000 - spaceTime) > 0.1){ paused = !paused; spaceHandled=true; }
  if(!paused && !gameOver){
    px += pvelx * speed * dt; px = Math.max(20, Math.min(w-20, px));
    bullets.forEach(b=> { b.x += b.vx*dt; b.y += b.vy*dt; b.ttl -= dt; });
    bullets = bullets.filter(b=> b.ttl>0 && b.y > -20);
    spawnAcc += dt; if(spawnAcc >= spawnInterval){ spawnAcc -= spawnInterval; spawnDrone(); }
    drones.forEach(d => { d.x += d.vx*dt; d.y += d.vy*dt; d.vy += 30*dt; });
    // collisions
    for(let i=drones.length-1;i>=0;i--){
      const d=drones[i];
      if(d.y > h+40){ drones.splice(i,1); continue;}
      // hit by bullet?
      for(let j=bullets.length-1;j>=0;j--){
        if(Math.hypot(bullets[j].x - d.x, bullets[j].y - d.y) < 12){
          bullets.splice(j,1); drones.splice(i,1); score+=1; break;
        }
      }
      // hit player?
      if(Math.hypot(px - d.x, py - d.y) < 20){ drones.splice(i,1); lives--; if(lives<=0){ gameOver=true; } }
    }
  }
  draw();
  if(gameOver){ ctx.fillStyle='rgba(0,0,0,0.6)'; ctx.fillRect(0,0,w,h); ctx.fillStyle='#fff'; ctx.fillText('Game Over - Score: '+score, w/2-80, h/2); }
  requestAnimationFrame(loop);
}
function draw(){
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle='#02102a'; ctx.fillRect(0,0,w,h);
  ctx.fillStyle='#6fd3ff'; ctx.fillRect(px-16,py-8,32,16); ctx.fillStyle='#fff'; ctx.beginPath(); ctx.arc(px,py-26,6,0,Math.PI*2); ctx.fill();
  for(let b of bullets){ ctx.fillStyle='#ffd36b'; ctx.beginPath(); ctx.arc(b.x,b.y,4,0,Math.PI*2); ctx.fill(); }
  for(let d of drones){ ctx.fillStyle='#ff7676'; ctx.beginPath(); ctx.arc(d.x,d.y,d.r,0,Math.PI*2); ctx.fill(); }
  ctx.fillStyle='#fff'; ctx.font='14px Inter'; ctx.fillText('Score: '+score+' Lives: '+lives, 12, 18);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
